## Linux系统与调试工具

### 1. 查看进程使用的端口？

netstat -tunlp | grep <pid> 或 lsof -i -P -n | grep <pid>

### 2. gdb常用命令？

break 设置断点；

run 运行程序；

next 单步执行；

print var 打印变量；

bt 查看堆栈回溯。

### 3. strace 与 ltrace 区别？

strace 跟踪系统调用；

ltrace 跟踪库函数调用；

都可用于调试运行时问题。

### 4. 检查内存泄漏的工具？

valgrind --leak-check=full ./program

### 5. 配置网络接口命令？

ifconfig eth0 192.168.1.10 netmask 255.255.255.0 up
# 或使用 ip 工具：
ip addr add 192.168.1.10/24 dev eth0

### 6. 查看CPU/内存/IO使用率的命令？

top：总体资源占用；

htop：可视化；

iotop：IO使用；

free -h：内存使用。

### 7. Linux 中的软中断和硬中断？

硬中断：由硬件触发（如网卡接收）；

软中断：内核中断处理后延迟执行的任务（如网络协议栈）。

### 8. 如何查看某个进程的线程？

ps -T -p <pid>

## 高频面试问题拓展：

### 什么是 page fault？怎么定位？

### 描述一次你用 perf 分析系统瓶颈的过程。

perf 是 Linux 系统里一个很厉害的性能分析工具。它能帮你查看 CPU 的使用情况，比如哪个函数占用了多少 CPU 时间。还能跟踪硬件事件，像缓存命中次数之类的。要是程序运行慢或者有性能瓶颈，用 perf 能找到热点代码，就是那些特别耗资源的部分。通过它的报告，你就能知道该优化哪里，让程序跑得更高效。

### 如何用 ftrace/bpftrace 追踪函数调用？

ftrace 是 Linux 内核的追踪工具，能记录内核函数的调用情况，帮你分析系统行为和性能瓶颈。bpf_trace 则基于 eBPF 技术，能在不修改内核源码的情况下动态追踪和分析系统，功能很强大，比如监控网络流量、进程活动等。它们都是排查系统问题、优化性能的好帮手。

### 怎么用 pahole 查看结构体布局和空洞？

pahole 是一个 Linux 工具，主要用来分析内核结构体的布局和大小。它能检查内核结构体对齐情况，帮助开发者优化内存使用，还能发现潜在的漏洞，对内核开发和调试很有帮助哦。

### 如何使用 IO 路径 tracing 定位磁盘瓶颈？

可以用一些工具来实现。比如 SystemTap，它能动态跟踪系统，你可以编写脚本设置跟踪点，观察 IO 路径上的数据流动情况。还有 bpftrace，基于 eBPF 技术，能实时分析 IO 相关事件。通过这些工具收集的数据，像 IO 等待时间、读写频率等，就能判断磁盘瓶颈出在哪啦。你是在处理相关问题吗？

### TCP 抓包分析的基本流程（tcpdump + wireshark）？

一般先用抓包工具，像 Wireshark，设置好捕获接口等参数开始抓包。抓到包后，过滤出 TCP 相关流量，分析数据包的序列号、确认号等，看连接建立和关闭是否正常。还能查看数据传输窗口大小、重传情况，判断有没有丢包之类的问题。要是用命令行工具，tcpdump 也很强大，抓完包可以配合其他工具分析。你之前用过这类工具吗？