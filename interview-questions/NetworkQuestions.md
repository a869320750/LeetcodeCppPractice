
# 1. TCP 三次握手及是否能减少到两次
第一次：客户端发送 SYN，建立连接请求。
第二次：服务器响应 SYN+ACK，确认请求。
第三次：客户端发送 ACK，确认服务器响应。
两次握手不可行：
服务端无法确认客户端的 ACK 是否能正常到达，可能导致资源泄漏或伪连接。

# 2. TCP 缓冲区满了怎么办
首先是处理发送缓冲区满的情况，比如降低发送速率，采用流量控制机制，像 TCP 的滑动窗口协议。还可以等待接收方处理数据并腾出空间，暂停发送新数据。要是接收缓冲区满了，就通知发送方降低发送速度，或者丢弃一些不重要的数据。也能考虑扩大缓冲区大小，但这不是根本办法。另外，优化网络传输效率，减少丢包和重传，也能缓解缓冲区压力呢。

# 3. 优化 TCP 文件上传性能
分块发送，流水线式传输。

使用零拷贝（Zero Copy）技术，如 sendfile。

开启 TCP_NODELAY，避免小包延迟。

大文件切片压缩。

多线程或异步 IO 上传。


# 4. TCP/UDP区别
    简化理解：
    TCP：“打电话”，确认对方在线，数据按顺序送达，不丢不重，但慢。
    UDP：“发短信”，不管对方在线不在线，直接发，可能丢，但快。

# 5. 三次握手四次挥手
## TCP 三次握手
    目的是： 保证双方准备就绪，防止旧连接影响。
        客户端 → 发送 SYN=1，请求建立连接。
        服务器 → 收到后，返回 SYN=1, ACK=1，确认连接。
        客户端 → 再发一个 ACK=1，确认。
    为什么是三次？
        第一次 SYN 只是客户端表态想连接。
        第二次 SYN+ACK 是服务器同意并告诉客户端“我收到了”。
        第三次 ACK 确保客户端收到服务器的回复，否则服务器不知道客户端是否收到。
## TCP 四次挥手
目的是： 保证数据传输完成后，双方正确关闭连接。
    客户端 → FIN=1（我要断开）
    服务器 → ACK=1（我知道了，但还有数据没发完）
    服务器 → FIN=1（我发完了，也要断开）
    客户端 → ACK=1（我知道了，彻底断开）

## 为什么是四次？
    服务器可能还有数据没发完，不能直接关，需要先等它自己发完再断。

## HTTP vs HTTPS
简单理解：
    HTTP = 明信片，别人能看到内容，容易被篡改。
    HTTPS = 机密信封，加密后传输，别人偷看也看不懂。

## 三、网络编程与协议栈

### 1. TCP三次握手过程？

客户端发送 SYN 报文（同步序列号）；

服务器收到后发送 SYN-ACK；

客户端收到后回复 ACK，连接建立。

### 2. TCP 和 UDP 区别？

TCP 面向连接，可靠传输，速度慢；

UDP 无连接，可能丢包，速度快；

TCP 应用于 HTTP、FTP；UDP 应用于 DNS、VoIP。

### 3. select、poll、epoll 区别？

select 有最大 fd 限制（1024）；

poll 无限制但效率低；

epoll 高效，支持事件驱动（边沿触发）。

### 4. Socket bind、listen、accept 含义？

bind：绑定地址和端口；

listen：设置监听队列，进入监听状态；

accept：接收客户端连接，返回新的 socket。

### 5. 如何解析自定义协议包？

先定义结构体或包格式；

按照字节流拆包（使用指针偏移、memcpy 等）；

注意大小端、对齐和包头校验。

### 6. TCP 如何保证可靠性？

序列号、确认应答；

超时重传、滑动窗口、流量控制；

拥塞控制（慢启动、拥塞避免）。

### 7. UDP 如何处理数据丢包？

应用层自己实现 ACK 和重传；

常用于音视频、游戏、DNS。

### 8. epoll 的 ET 与 LT 模式？

LT（Level Trigger）：只要数据未读完，会持续通知；

ET（Edge Trigger）：只在状态变化时通知，必须一次性读完；

ET 性能更好，但实现更复杂。